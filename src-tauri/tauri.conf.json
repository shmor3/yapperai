{
	"$schema": "https://schema.tauri.app/config/2",
	"productName": "yapperai",
	"version": "0.1.0",
	"identifier": "com.yapperai.app",
	"build": {
		"beforeDevCommand": "pnpm dev",
		"devUrl": "http://localhost:1420",
		"beforeBuildCommand": "pnpm build",
		"frontendDist": "../build/client",
		"removeUnusedCommands": true
	},
	"app": {
		"withGlobalTauri": true,
		"macOSPrivateApi": true,
		"windows": [
			{
				"title": "yapperai",
				"width": 1000,
				"height": 800,
				"minWidth": 1000,
				"minHeight": 800,
				"resizable": true,
				"decorations": false,
				"titleBarStyle": "Overlay",
				"fullscreen": false,
				"center": true
			},
			{
				"label": "splash",
				"width": 400,
				"height": 200,
				"decorations": false,
				"resizable": false,
				"url": "./assets/splash.html"
			}
		],
		"security": {
			"pattern": {
				"use": "isolation",
				"options": {
					"dir": "../isolation-dist/"
				}
			},
			"csp": {
				"default-src": "'self' customprotocol: asset:",
				"connect-src": "ipc: http://ipc.localhost",
				"font-src": ["https://fonts.gstatic.com"],
				"img-src": "'self' asset: http://asset.localhost blob: data:",
				"style-src": "'unsafe-inline' 'self' https://fonts.googleapis.com"
			},
			"freezePrototype": true,
			"assetProtocol": {
				"enable": true,
				"scope": {
					"allow": ["$APPDATA/db/**", "$RESOURCE/**"],
					"deny": ["$APPDATA/db/*.stronghold"]
				}
			}
		},

		"trayIcon": {
			"iconPath": "icons/32x32.png",
			"iconAsTemplate": true
		}
	},
	"plugins": {
		"updater": {
			"windows": {
				"installMode": "passive"
			},
			"pubkey": "CONTENT FROM PUBLICKEY.PEM",
			"endpoints": [
				"https://releases.myapp.com/{{target}}/{{arch}}/{{current_version}}",
				"https://github.com/user/repo/releases/latest/download/latest.json"
			]
		},
		"sql": {
			"preload": ["sqlite:mydatabase.db"]
		}
	},
	"bundle": {
		"active": true,
		"targets": "all",
		"createUpdaterArtifacts": true,
		"icon": [
			"icons/32x32.png",
			"icons/128x128.png",
			"icons/128x128@2x.png",
			"icons/icon.icns",
			"icons/icon.ico"
		],
		"windows": {
			"wix": {
				"language": {
					"en-US": {}
				}
			},
			"nsis": {
				"compression": "none"
			}
		}
	}
}
